const c=document.getElementById("cart-modal"),v=document.getElementById("close-cart"),s=document.getElementById("cart-items"),p=document.getElementById("empty-cart"),d=document.getElementById("cart-total"),k=document.getElementById("clear-cart"),w=document.getElementById("checkout-cart"),h={1:{name:"Yotsuba Koiwai",price:500,image:"/yotsuba/yotsuba-1.jpg"},2:{name:"GGG Series Mobile Suit Zeta Gundam Haman Karn 1/8",price:500,image:"/gundam-haman/gundam-haman-1.jpg"},3:{name:"Nendoroid Petite - B.G.M Festival Set Vol.0",price:100,image:"/nendoroid-petite/nendoroid-petite-1.jpg"},4:{name:"Granblue Fantasy - Charlotta - 1/8",price:1e3,image:"/granblue-charlotta/granblue-charlotta-1.jpg"},5:{name:"Odin Sphere - Gwendolyn 1/8 Complete Figure",price:500,image:"/odin-gwendolyn/odin-gwendolyn-1.jpg"},6:{name:"Odin Sphere - Mercedes 1/8 Complete Figure",price:500,image:"/odin-mercedes/odin-mercedes-1.jpg"},7:{name:"Odin Sphere - Velvet with Cornelius 1/8 Complete Figure",price:500,image:"/odin-velvet/odin-velvet-1.jpg"},8:{name:"GGG Series Mobile Suit Gundam 0083 STARDUST MEMORY - Anavel Gato 1/8",price:500,image:"/GGGSeriesMobileSuitGundam0083AnavelGato/GGGSeriesMobileSuitGundam0083Anavel Gato1.jpg"},9:{name:"Excellent Model RAHDX G.A.NEO Mobile Suit Gundam Ramba Ral 1/8",price:500,image:"/gundam-ramba/gundam-ramba-1.jpg"},10:{name:"Yamato Guys Collection - Space Battleship Yamato 2199: Juzo Okita 1/8 Complete Figure",price:500,image:"/yamato-okita/yamato-okita-1.jpg"},11:{name:"1/100 MG MS-07B-3 Gouf Custom",price:200,image:"/gouf-custom/gouf-custom-1.jpg"},12:{name:"1/100 MG Qubeley",price:300,image:"/qubeley/qubeley-1.jpg"},13:{name:"THE iDOLM@STER Cinderella Girls - Anastasia - 1/8 - Memories Ver. (Alter)",price:500,image:"/cinderella-anastasia/cinderella-anastasia-1.jpg"},14:{name:"THE iDOLM@STER Cinderella Girls - Nitta Minami - 1/8 - Memories Ver. (Alter)",price:500,image:"/cinderella-minami/cinderella-minami-1.jpg"},15:{name:"THE iDOLM@STER Cinderella Girls - Kanzaki Ranko - 1/8 - Memories Ver. (Alter)",price:500,image:"/cinderella-ranko/cinderella-ranko-1.jpg"},16:{name:"GRANBLUE FANTASY - Danua 1/8 Complete Figure",price:500,image:"/granblue-danua/granblue-danua-1.jpg"},17:{name:"GUILTY GEAR Xrd -SIGN- Elphelt Valentine 1/7 Complete Figure",price:500,image:"/guilty-elphelt/guilty-elphelt-1.jpg"},18:{name:"Excellent Model Shinra Bansho Choco - Masenki Asmodies 1/8 Complete Figure",price:500,image:"/shinra-asmodies/shinra-asmodies-1.jpg"},19:{name:"Excellent Model - Shinra Bansho Choco: Mashougun Astaroth 1/8 Complete Figure",price:500,image:"/shinra-astaroth/shinra-astaroth-1.jpg"},20:{name:"THE IDOLM@STER Cinderella Girls - Sachiko Koshimizu Self-Proclaimed Cute Ver. (Regular Edition) 1/8 Complete Figure",price:300,image:"/cinderella-sachiko/cinderella-sachiko-1.jpg"},21:{name:"Nendoroid - Snow Miku Magical Snow 2014",price:500,image:"/nendoroid-snow-miku/nendoroid-snow-miku-1.jpg"},22:{name:"Golgo 13 - Duke Togo - Figma (#042) (Max Factory)",price:500,image:"/figma-golgo/figma-golgo-1.jpg"},23:{name:"Triggerheart Exelica - Exelica 1/8 Complete Figure",price:800,image:"/triggerheart-exelica/triggerheart-exelica-1.jpg"},24:{name:"Orchid Seed Seven Deadly Sins Leviathan 1/7 PVC",price:500,image:"/orchid-leviathan/orchid-leviathan-1.jpg"},25:{name:"Nendoroid - Hatsune Miku Halloween 2014",price:500,image:"/nendoroid-halloween-miku/nendoroid-halloween-miku-1.jpg"},26:{name:"Character Vocal Series 01 Hatsune Miku Tell Your World Ver. 1/8 Complete Figure",price:750,image:"/miku-tell-world/miku-tell-world-1.jpg"},27:{name:"Grimoire of Zero - Zero 1/8 Complete Figure",price:800,image:"/grimoire-zero/grimoire-zero-1.jpg"},28:{name:"THE IDOLM@STER Cinderella Girls - Riina Tada 1/8 Complete Figure",price:500,image:"/idolmaster-riina/idolmaster-riina-1.jpg"},101:{name:"Nendoroid Hatsune Miku: Sailor Uniform",price:500,image:"/nendoroid-sailor-miku/nendoroid-sailor-miku-1.jpg"},102:{name:"Nendoroid - UTAU: Teto Kasane",price:500,image:"/nendoroid-teto/nendoroid-teto-1.jpg"}};function C(){c?.classList.remove("hidden"),m()}function g(){c?.classList.add("hidden")}function m(){const t=JSON.parse(localStorage.getItem("figure-store")||'{"cart": {}, "wishlist": []}').cart;if(Object.keys(t).length===0){p?.classList.remove("hidden"),s?.classList.add("hidden"),d.textContent="S/0";return}p?.classList.add("hidden"),s?.classList.remove("hidden");let a=0,n="";Object.entries(t).forEach(([r,o])=>{const i=h[r];if(i){const l=i.price*o;a+=l,n+=`
          <div class="flex items-center gap-3 py-3 border-b last:border-b-0">
            <img src="${i.image}" alt="${i.name}" class="w-16 h-16 object-cover rounded-lg" onerror="this.src='/placeholder-figure.svg'; this.onerror=null;">
            <div class="flex-1">
              <h4 class="font-medium text-sm">${i.name}</h4>
              <p class="text-gray-500 text-sm">S/${i.price.toLocaleString("en-US")}</p>
            </div>
            <div class="flex items-center gap-2">
              <button onclick="updateQuantity(${r}, ${o-1})" class="w-6 h-6 border border-gray-300 rounded flex items-center justify-center hover:bg-gray-50">
                <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path>
                </svg>
              </button>
              <span class="w-8 text-center text-sm">${o}</span>
              <button onclick="updateQuantity(${r}, ${o+1})" class="w-6 h-6 border border-gray-300 rounded flex items-center justify-center hover:bg-gray-50">
                <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                </svg>
              </button>
            </div>
            <button onclick="removeFromCart(${r})" class="text-red-500 hover:text-red-700">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
              </svg>
            </button>
          </div>
        `}}),s&&(s.innerHTML=n),d&&(d.textContent=`S/${a.toLocaleString("en-US")}`)}function f(e,t){const a=JSON.parse(localStorage.getItem("figure-store")||'{"cart": {}, "wishlist": []}');t<=0?delete a.cart[e]:a.cart[e]=t,localStorage.setItem("figure-store",JSON.stringify(a)),window.dispatchEvent(new CustomEvent("cartUpdated")),m()}function b(e){const t=JSON.parse(localStorage.getItem("figure-store")||'{"cart": {}, "wishlist": []}');delete t.cart[e],localStorage.setItem("figure-store",JSON.stringify(t)),window.dispatchEvent(new CustomEvent("cartUpdated")),m()}function S(){const e=JSON.parse(localStorage.getItem("figure-store")||'{"cart": {}, "wishlist": []}');e.cart={},localStorage.setItem("figure-store",JSON.stringify(e)),window.dispatchEvent(new CustomEvent("cartUpdated")),m()}function M(){const t=JSON.parse(localStorage.getItem("figure-store")||'{"cart": {}, "wishlist": []}').cart;if(Object.keys(t).length===0){alert("Tu carrito esta vacio");return}let a=`Hola! Quiero comprar los siguientes productos:

`,n=0;Object.entries(t).forEach(([o,i])=>{const l=h[o];if(l){const u=l.price*i;n+=u,a+=`â€¢ ${l.name} x${i} - S/${u.toLocaleString("en-US")}
`}}),a+=`
Total: S/${n.toLocaleString("en-US")}`;const r=encodeURIComponent(a);window.open(`https://wa.me/51949799869?text=${r}`,"_blank"),S(),g()}v?.addEventListener("click",g);k?.addEventListener("click",S);w?.addEventListener("click",M);c?.addEventListener("click",e=>{e.target===c&&g()});window.openCart=C;window.updateQuantity=f;window.removeFromCart=b;
